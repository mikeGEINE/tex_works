\subsection{Модуль \ocamlinlinecode{Variables.\allowbreak{}Make}}\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make}%
\ocamlinlinecode{Make} создаёт экземпляр \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-VARIABLES]{\ocamlinlinecode{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}VARIABLES}}} для заданной модели.

\subsubsection{Параметры\label{parameters}}%
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M}\ocamlcodefragment{\ocamltag{keyword}{module} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M]{\ocamlinlinecode{M}}}\ocamlcodefragment{ : \ocamltag{keyword}{sig}}\begin{ocamlindent}\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t}\ocamlcodefragment{\ocamltag{keyword}{type} t}\begin{ocamlindent}Некоторое представление сущности, которая будет аутентифицирована.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-val-serialize}\ocamlcodefragment{\ocamltag{keyword}{val} serialize : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{t}} \ocamltag{arrow}{$\rightarrow$} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}string}\begin{ocamlindent}\ocamlinlinecode{serialize ent} создаёт \ocamlinlinecode{string} из \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{\ocamlinlinecode{t}}}.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-val-deserialize}\ocamlcodefragment{\ocamltag{keyword}{val} deserialize : \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}string \ocamltag{arrow}{$\rightarrow$} ( \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{t}},\allowbreak{} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Error.\allowbreak{}t ) \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Result.\allowbreak{}t}\begin{ocamlindent}\ocamlinlinecode{deserialize} создаёт \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{\ocamlinlinecode{t}}}. Возвращает: \ocamlinlinecode{Ok t} если десериализация была успешна или \ocamlinlinecode{Error string} если произошла ошибка.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-val-identificate}\ocamlcodefragment{\ocamltag{keyword}{val} identificate : 
  \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}request \ocamltag{arrow}{$\rightarrow$}
  ( \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{t}},\allowbreak{} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Error.\allowbreak{}t ) \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Result.\allowbreak{}t \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}promise}\begin{ocamlindent}\ocamlinlinecode{identificate} определяет, какая именно сущность аутентифицируется. Находит репрезентацию сущности или возвращает ошибку.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-val-applicable+u+strats}\ocamlcodefragment{\ocamltag{keyword}{val} applicable\_\allowbreak{}strats : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{t}} \ocamltag{arrow}{$\rightarrow$} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}string \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}list}\begin{ocamlindent}\ocamlinlinecode{applicable\_\allowbreak{}strats} возвращает список стратегий, которые могут быть применены ко всей \ocamlinlinecode{MODEL} или к определённой сущности \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{\ocamlinlinecode{t}}}. Строки должны совпадать с \ocamlinlinecode{STRATEGY}.name.\end{ocamlindent}%
\medbreak
\end{ocamlindent}%
\ocamlcodefragment{\ocamltag{keyword}{end}}\\
\subsubsection{Сигнатура\label{signature}}%
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-type-entity}\ocamlcodefragment{\ocamltag{keyword}{type} entity = \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-argument-1-M-type-t]{\ocamlinlinecode{M.\allowbreak{}t}}}\begin{ocamlindent}тип \ocamlinlinecode{entity} - тип аутентифицируемой сущности, совпадающий с \ocamlinlinecode{MODEL}.t.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-val-authenticated}\ocamlcodefragment{\ocamltag{keyword}{val} authenticated : \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}bool \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}field}\begin{ocamlindent}\ocamlinlinecode{authenticated} - переменная, действительная в рамках одного запроса, отражает, была ли пройдена аутентификация ранее. Устанавливается в \ocamlinlinecode{SESSIONMANAGER}.auth\_setup.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-val-current+u+user}\ocamlcodefragment{\ocamltag{keyword}{val} current\_\allowbreak{}user : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-type-entity]{\ocamlinlinecode{entity}} \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}field}\begin{ocamlindent}\ocamlinlinecode{current\_\allowbreak{}user} - переменная, действительная в рамках одного запроса, содержит аутентифицированную сущность (если ранее была пройдена аутентификация). Устанавливается в \ocamlinlinecode{SESSIONMANAGER}.auth\_setup\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-val-auth+u+error}\ocamlcodefragment{\ocamltag{keyword}{val} auth\_\allowbreak{}error : \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Error.\allowbreak{}t \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}field}\begin{ocamlindent}\ocamlinlinecode{auth\_\allowbreak{}error} - field-переменная с ошибкой, которая могла произойти на любом этапе аутентификации. Устанавливается в \ocamlinlinecode{AUTHENTICATOR}.authenticate.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-val-update+u+current+u+user}\ocamlcodefragment{\ocamltag{keyword}{val} update\_\allowbreak{}current\_\allowbreak{}user : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-type-entity]{\ocamlinlinecode{entity}} \ocamltag{arrow}{$\rightarrow$} \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}request \ocamltag{arrow}{$\rightarrow$} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}unit \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}promise}\begin{ocamlindent}\ocamlinlinecode{update\_\allowbreak{}current\_\allowbreak{}user user request} обновляет \hyperref[page-FPauth-core-module-FPauth+u+core-module-Variables-module-Make-val-current+u+user]{\ocamlinlinecode{\ocamlinlinecode{current\_\allowbreak{}user}}} и сессию. Необходимо использовать в том случе, если были внесены изменения, влияющие на сериализацию.\end{ocamlindent}%
\medbreak


