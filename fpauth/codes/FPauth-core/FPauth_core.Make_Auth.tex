\subsection{Модуль \ocamlinlinecode{FPauth\_\allowbreak{}core.\allowbreak{}Make\_\allowbreak{}Auth}}\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth}%
\ocamlinlinecode{Make\_\allowbreak{}Auth} создаёт модуль аутентификации на основе \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-MODEL]{\ocamlinlinecode{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}MODEL}}}. Предоставляет локальные переменные (\ocamlinlinecode{field}), \ocamlinlinecode{middleware}, аутентификатор, запускающий стратегии аутентификации, а также маршрутизатор, добавляющий в приложение маршруты аутентификации.

\subsubsection{Параметры\label{parameters}}%
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M}\ocamlcodefragment{\ocamltag{keyword}{module} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M]{\ocamlinlinecode{M}}}\ocamlcodefragment{ : \ocamltag{keyword}{sig}}\begin{ocamlindent}\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t}\ocamlcodefragment{\ocamltag{keyword}{type} t}\begin{ocamlindent}Некоторое представление сущности, которая будет аутентифицирована.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-val-serialize}\ocamlcodefragment{\ocamltag{keyword}{val} serialize : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{t}} \ocamltag{arrow}{$\rightarrow$} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}string}\begin{ocamlindent}\ocamlinlinecode{serialize ent} создаёт \ocamlinlinecode{string} из \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{\ocamlinlinecode{t}}}.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-val-deserialize}\ocamlcodefragment{\ocamltag{keyword}{val} deserialize : \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}string \ocamltag{arrow}{$\rightarrow$} ( \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{t}},\allowbreak{} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Error.\allowbreak{}t ) \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Result.\allowbreak{}t}\begin{ocamlindent}\ocamlinlinecode{deserialize} создаёт \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{\ocamlinlinecode{t}}}. Возвращает: \ocamlinlinecode{Ok t} если десериализация была успешна или \ocamlinlinecode{Error string} если произошла ошибка.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-val-identificate}\ocamlcodefragment{\ocamltag{keyword}{val} identificate : 
  \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}request \ocamltag{arrow}{$\rightarrow$}
  ( \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{t}},\allowbreak{} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Error.\allowbreak{}t ) \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}Result.\allowbreak{}t \hyperref[xref-unresolved]{\ocamlinlinecode{Dream}}.\allowbreak{}promise}\begin{ocamlindent}\ocamlinlinecode{identificate} определяет, какая именно сущность аутентифицируется. Находит репрезентацию сущности или возвращает ошибку.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-val-applicable+u+strats}\ocamlcodefragment{\ocamltag{keyword}{val} applicable\_\allowbreak{}strats : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{t}} \ocamltag{arrow}{$\rightarrow$} \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}string \hyperref[xref-unresolved]{\ocamlinlinecode{Base}}.\allowbreak{}list}\begin{ocamlindent}\ocamlinlinecode{applicable\_\allowbreak{}strats} возвращает список стратегий, которые могут быть применены ко всей \ocamlinlinecode{MODEL} или к определённой сущности \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{\ocamlinlinecode{t}}}. Строки должны совпадать с \ocamlinlinecode{STRATEGY}.name.\end{ocamlindent}%
\medbreak
\end{ocamlindent}%
\ocamlcodefragment{\ocamltag{keyword}{end}}\\
\subsubsection{Сигнатура\label{signature}}%
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Variables}\ocamlcodefragment{\ocamltag{keyword}{module} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Variables]{\ocamlinlinecode{Variables}}}\ocamlcodefragment{ : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-VARIABLES]{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}VARIABLES}} \ocamltag{keyword}{with} \ocamltag{keyword}{type} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-VARIABLES-type-entity]{\ocamlinlinecode{entity}} = \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{M.\allowbreak{}t}}}\begin{ocamlindent}\ocamlinlinecode{Variables} содержит типы, функции и \ocamlinlinecode{fields}, основанные на \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-MODEL]{\ocamlinlinecode{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}MODEL}}}.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Session+u+manager}\ocamlcodefragment{\ocamltag{keyword}{module} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Session+u+manager]{\ocamlinlinecode{Session\_\allowbreak{}manager}}}\ocamlcodefragment{ : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-SESSIONMANAGER]{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}SESSIONMANAGER}} \ocamltag{keyword}{with} \ocamltag{keyword}{type} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-SESSIONMANAGER-type-entity]{\ocamlinlinecode{entity}} = \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{M.\allowbreak{}t}}}\begin{ocamlindent}\ocamlinlinecode{SessionManager} - модуль, который устанавливает \ocamlinlinecode{fields} из сессии для каждого запроса через \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-SESSIONMANAGER-val-auth+u+setup]{\ocamlinlinecode{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}SESSIONMANAGER.\allowbreak{}auth\_\allowbreak{}setup}}} middleware.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Authenticator}\ocamlcodefragment{\ocamltag{keyword}{module} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Authenticator]{\ocamlinlinecode{Authenticator}}}\ocamlcodefragment{ : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-AUTHENTICATOR]{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}AUTHENTICATOR}} \ocamltag{keyword}{with} \ocamltag{keyword}{type} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-AUTHENTICATOR-type-entity]{\ocamlinlinecode{entity}} = \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{M.\allowbreak{}t}}}\begin{ocamlindent}\ocamlinlinecode{Authenticator} содержит функции для исполнения списка \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-STRATEGY]{\ocamlinlinecode{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}STRATEGY}}} и сброса аутентификации.\end{ocamlindent}%
\medbreak
\label{page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Router}\ocamlcodefragment{\ocamltag{keyword}{module} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-module-Router]{\ocamlinlinecode{Router}}}\ocamlcodefragment{ : \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-ROUTER]{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}ROUTER}} \ocamltag{keyword}{with} \ocamltag{keyword}{type} \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-ROUTER-type-entity]{\ocamlinlinecode{entity}} = \hyperref[page-FPauth-core-module-FPauth+u+core-module-Make+u+Auth-argument-1-M-type-t]{\ocamlinlinecode{M.\allowbreak{}t}}}\begin{ocamlindent}\ocamlinlinecode{Router} создаёт маршруты, необходимые для аутентификации. Содержит несколько базовых handlers и объединяет их с маршрутами из стратегий \hyperref[page-FPauth-core-module-FPauth+u+core-module-Auth+u+sign-module-type-STRATEGY-val-routes]{\ocamlinlinecode{\ocamlinlinecode{Auth\_\allowbreak{}sign.\allowbreak{}STRATEGY.\allowbreak{}routes}}}.\end{ocamlindent}%
\medbreak

\input{FPauth-core/FPauth_core.Make_Auth.Variables.tex}
\input{FPauth-core/FPauth_core.Make_Auth.Session_manager.tex}
\input{FPauth-core/FPauth_core.Make_Auth.Authenticator.tex}
\input{FPauth-core/FPauth_core.Make_Auth.Router.tex}
